---
#Install Kube dashboarwd
- name: Deploy kubernetes dashboard into cluster
  command: |
          kubectl --kubeconfig={{ kube_conf }} \
          apply -f https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml
  register: create_result
  until: create_result.rc == 0
  retries: 5
  delay: 2
  ignore_errors: true

- name: Create Dashboard admin role
  k8s:
          state: present
          src: files/dashboard-admin-user.yml

- name: Create Dashboard admin role binding
  k8s:
          state: present
          src: files/dashboard-admin-binding.yml

